# Используем официальный образ Python 3.11 (slim-версия для меньшего размера)
# Ты можешь выбрать другую версию, если необходимо, но убедись, что она >= 3.10
FROM python:3.12-slim

# Устанавливаем рабочую директорию внутри контейнера
WORKDIR /app

# --- ИЗМЕНЕНО: Устанавливаем curl ---
# Обновляем список пакетов и устанавливаем curl
# -y - автоматически отвечать "да" на запросы установки
# --no-install-recommends - не устанавливать необязательные рекомендованные пакеты
# && apt-get clean - очищаем кеш apt после установки для уменьшения размера образа
RUN apt-get update && \
    apt-get install -y curl --no-install-recommends && \
    apt-get clean && \
    rm -rf /var/lib/apt/lists/*
    
# Копируем файл с зависимостями в рабочую директорию
COPY requirements.txt .

# Устанавливаем зависимости
# --no-cache-dir - не сохранять кеш pip, чтобы уменьшить размер образа
# --upgrade pip - обновляем pip до последней версии
RUN pip install --no-cache-dir --upgrade pip && \
    pip install --no-cache-dir -r requirements.txt

# Копируем весь остальной код приложения в рабочую директорию
# Убедись, что у тебя есть .dockerignore файл, чтобы не копировать лишнее (venv, .git, .env и т.д.)
COPY . .

# Указываем команду, которая будет запускаться при старте контейнера
CMD ["python", "main.py"]
